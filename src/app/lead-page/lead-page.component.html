<div class="chatbox-container" [class.hidden]="!sessionId">
  <div class="chatbox-header">
    <button class="close-btn" (click)="sessionId = null">Ã—</button>
  </div>
  <div class="chatbox-body" id="chatboxBody">
    <div *ngFor="let message of messages">
      <div class="message" [ngClass]="message.sender === 'user' ? 'sent' : 'received'">
        {{ message.text }}
      </div>
    </div>

    <!-- Loader -->
    <div *ngIf="loading" class="loader">
      <img src="assets/images/Ellipsis@1x-1.0s-200px-200px.svg" alt="Loading..." />
    </div>
  </div>

  <!-- Disable bubble buttons -->
  <div class="chatbox-bubble-section">
    <button class="chat-topic-button" (click)="sendBubbleQuery('redflags')" [disabled]="loading">Red Flags</button>
    <button class="chat-topic-button" (click)="sendBubbleQuery('insights')" [disabled]="loading">Insights</button>
    <button class="chat-topic-button" (click)="sendBubbleQuery('product_recommendation')" [disabled]="loading">Product Recommendation</button>
  </div>

  <div class="chatbox-footer">
    <input [(ngModel)]="query" type="text" placeholder="Ask me anything..." [disabled]="loading" (keyup.enter)="sendMessage()" />
    <button (click)="sendMessage()" [disabled]="loading">Send</button>
  </div>
</div>

<img class="chatbox-image" src="assets/images/Chatbox_Close.png" (click)="onChatboxImageClick()" />
